plugins {
    id 'java'
    id 'signing'
}

group 'org.example'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'
}

test {
    useJUnitPlatform()
}

tasks.create('foo') {
    description("Do some foo")
}.doLast {
    String s = project.property('foo')
    for (final def c in s.toCharArray()) {
        println c
    }
    println "FOO: >${project.property('foo')}<"
}

signing {

    def signingKeyId = project.findProperty("signingKeyId")
    def signingKey = project.findProperty("signingKey")
    def signingPassword = project.findProperty("signingPassword")
    if (signingKeyId) {
        useInMemoryPgpKeys(signingKeyId, signingKey, signingPassword)
    } else if (signingKey) {
        useInMemoryPgpKeys(signingKey, signingPassword)
    }

    sign configurations.archives
}


